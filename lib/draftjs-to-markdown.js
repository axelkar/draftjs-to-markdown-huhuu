!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.draftjsToMarkdown=e():t.draftjsToMarkdown=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t,e){t&&Object.keys(t).forEach((function(n){({}).hasOwnProperty.call(t,n)&&e(n,t[n])}))}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.r(e),t.d(e,{addInlineStyleMarkdown:()=>O,addStylePropertyMarkdown:()=>y,default:()=>b,getBlockContentMarkdown:()=>d,getBlockStyle:()=>g,getStylesAtOffset:()=>f,sameStyleAsPrevious:()=>u,trimLeadingZeros:()=>p,trimTrailingZeros:()=>h});var i={unstyled:"","header-one":"# ","header-two":"## ","header-three":"### ","header-four":"#### ","header-five":"##### ","header-six":"###### ","unordered-list-item":"- ","ordered-list-item":"1. ",blockquote:"> ",code:"    "};function l(t,e,n,r){var o=t[e];if("function"==typeof r){var a=r(o,n);if(a)return a}return"MENTION"===o.type||"LINK"===o.type?"[".concat(n,"](").concat(o.data.url,")"):"IMAGE"===o.type?"![".concat(o.data.alt||"","](").concat(o.data.src,")"):"EMBEDDED_LINK"===o.type?'<iframe width="'.concat(o.data.width,'" height="').concat(o.data.height,'" src="').concat(o.data.src,'" frameBorder="0" allowFullScreen />'):n}function u(t,e,n){var r,o=!0;try{n>0&&n<t.length?(Array.isArray(e)?(r=e,function(t){if(Array.isArray(t))return c(t)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):Object.keys(e)).forEach((function(e){o=o&&t[e][n]===t[e][n-1]})):o=!1}catch(t){console.log(t),o=!1}return o}function f(t,e){var n={};return t.COLOR[e]&&(n.COLOR=t.COLOR[e]),t.BGCOLOR[e]&&(n.BGCOLOR=t.BGCOLOR[e]),t.FONTSIZE[e]&&(n.FONTSIZE=t.FONTSIZE[e]),t.FONTFAMILY[e]&&(n.FONTFAMILY=t.FONTFAMILY[e]),t.SUBSCRIPT[e]&&(n.SUBSCRIPT=!0),t.SUPERSCRIPT[e]&&(n.SUPERSCRIPT=!0),t.CODE[e]&&(n.CODE=!0),t.STRIKETHROUGH[e]&&(n.STRIKETHROUGH=!0),t.UNDERLINE[e]&&(n.UNDERLINE=!0),t.ITALIC[e]&&(n.ITALIC=!0),t.BOLD[e]&&(n.BOLD=!0),t["CODE-BLOCK"][e]&&(n["CODE-BLOCK"]=!0),t.BLOCKQUOTE[e]&&(n.BLOCKQUOTE=!0),n}function s(t,e,n,r){var o=[],a=t.text;if(a.length>0)for(var c,i=function(t){var e=t.text,n=t.inlineStyleRanges,r={COLOR:new Array(e.length),BGCOLOR:new Array(e.length),FONTSIZE:new Array(e.length),FONTFAMILY:new Array(e.length),SUBSCRIPT:new Array(e.length),SUPERSCRIPT:new Array(e.length),CODE:new Array(e.length),STRIKETHROUGH:new Array(e.length),UNDERLINE:new Array(e.length),ITALIC:new Array(e.length),BOLD:new Array(e.length),BLOCKQUOTE:new Array(e.length),"CODE-BLOCK":new Array(e.length),length:e.length};return n&&n.length>0&&n.forEach((function(t){for(var e=t.offset,n=e+t.length,o=e;o<n;o+=1)0===t.style.indexOf("color-")?r.COLOR[o]=t.style.substring(6):0===t.style.indexOf("bgcolor-")?r.BGCOLOR[o]=t.style.substring(8):0===t.style.indexOf("fontsize-")?r.FONTSIZE[o]=t.style.substring(9):0===t.style.indexOf("fontfamily-")?r.FONTFAMILY[o]=t.style.substring(11):r[t.style]&&(r[t.style][o]=!0)})),r}(t),l=n;l<r;l+=1)l!==n&&u(i,e,l)?(c.text.push(a[l]),c.end=l+1):(c={styles:f(i,l),text:[a[l]],start:l,end:l+1},o.push(c));return o}function O(t,e,n){return null!==n[t]||void 0!==n[t]?"".concat(n[t]).concat(e).concat(n[t]):e}function y(t){var e,n=t.styles,r=(e=t.text)&&e.length>0?e.map((function(t){switch(t){case"\n":return"\\s\\s\n";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return t}})).join(""):"";if(n&&(n.COLOR||n.BGCOLOR||n.FONTSIZE||n.FONTFAMILY)){var o='style="';return n.COLOR&&(o+="color: ".concat(n.COLOR,";")),n.BGCOLOR&&(o+="background-color: ".concat(n.BGCOLOR,";")),n.FONTSIZE&&(o+="font-size: ".concat(n.FONTSIZE,"px;")),n.FONTFAMILY&&(o+="font-family: ".concat(n.FONTFAMILY,";")),"<span ".concat(o+='"',">").concat(r,"</span>")}return r}function p(t){if(t){for(var e=t,n=0;n<e.length&&" "===t[n];n+=1)e=e.replace(" ","&nbsp;");return e}return t}function h(t){if(t){for(var e=t,n=e.length-1;n>=0&&" "===e[n];n-=1)e="".concat(e.substring(0,n),"&nbsp;").concat(e.substring(n+1));return e}return t}function d(t,e,r,a,c){if(function(t){return t.entityRanges.length>0&&(null==(e=t.text)||0===e.length||0===e.trim().length);var e}(t))return l(e,t.entityRanges[0].key,void 0,a);var i=[],u=function(t,e){var n=[],r=0,o=t.entityRanges.map((function(t){return{offset:t.offset,length:t.length,key:t.key,type:"ENTITY"}}));return o=o.concat(function(t,e){var n=[];if(e)for(var r=0,o=0,a=t,c=e.trigger||"#",i=e.separator||" ";a.length>0&&o>=0;)if(a[0]===c?(o=0,r=0,a=a.substr(c.length)):(o=a.indexOf(i+c))>=0&&(a=a.substr(o+(i+c).length),r+=o+i.length),o>=0){var l=a.indexOf(i)>=0?a.indexOf(i):a.length,u=a.substr(0,l);u&&u.length>0&&n.push({offset:r,length:u.length+c.length,type:"HASHTAG"}),r+=c.length}return n}(t.text,e)),(o=o.sort((function(t,e){return t.offset-e.offset}))).forEach((function(t){t.offset>r&&n.push({start:r,end:t.offset-1}),n.push({start:t.offset,end:t.offset+t.length,entityKey:t.key,type:t.type}),r=t.offset+t.length})),r<t.text.length&&n.push({start:r,end:t.text.length}),n}(t,r);return u.forEach((function(r,f){var d=function(t,e,r,a,c){var i=[],u=o({BOLD:"**",ITALIC:"*",UNDERLINE:"__",STRIKETHROUGH:"~~",CODE:"`","CODE-BLOCK":"```",BLOCKQUOTE:">",SUPERSCRIPT:"<sup>",SUBSCRIPT:"<sub>"},c),f=s(t,u,r.start,r.end),p="";f.forEach((function(e){var r=s(t,["COLOR","BGCOLOR","FONTSIZE","FONTFAMILY"],e.start,e.end),o="";r.forEach((function(t){o+=y(t)})),p+=function(t,e,r){var o=e;return n(t,(function(t){o=O(t,o,r)})),o}(e.styles,o,u)})),i.push(p);var h=i.join("");return"ENTITY"===r.type?void 0!==r.entityKey&&null!==r.entityKey&&(h=l(e,r.entityKey,h,a)):"HASHTAG"===r.type&&(h="[".concat(h,"](").concat(h,")")),h}(t,e,r,a,c);0===f&&(d=p(d)),f===u.length-1&&(d=h(d)),i.push(d)})),i.join("")}function g(t){var e="";return n(t,(function(t,n){e+="".concat(t,":").concat(n,";")})),e}const b=function(t,e,n,r){var a=[];if(t){var c=o(o({},i),r&&r.blockTypesMapping&&r.blockTypesMapping),l=t.blocks,u=t.entityMap;l&&l.length>0&&l.forEach((function(t){var o,i=function(t,e,n,r,o,a){var c=[];c.push(e[t.type]);var i,l,u=d(t,n,r,o,(null==a?void 0:a.customStyleTransform)||{});return t.data&&(i=u,u=(l=g(t.data))?'<span style="'.concat(l,'">').concat(i,"</span>"):i),c.push(u),c.push(a&&null!=a&&a.emptyLineBeforeBlock?"".concat(null!=a&&a.printBreakLineLiteral?"\\n\n\n":"\n\n"):"".concat(null!=a&&a.printBreakLineLiteral?"\\n":"\n")),c.join("")}(t,c,u,e,n,r);("unordered-list-item"===(o=t.type)||"ordered-list-item"===o)&&(i=function(t){for(var e="",n=0;n<4*t;n+=1)e+=" ";return e}(t.depth)+i),a.push(i)}))}return a.join("")};return e})()}));
//# sourceMappingURL=draftjs-to-markdown.js.map